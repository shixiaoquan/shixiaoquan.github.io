---
layout: post
title: 如何优雅的Commit
date: 2018/03/14 22:49:23
feature-img: "assets/img/pexels/Git-Commit.jpg"
thumbnail: "assets/img/thumbnails/Git-Commit.jpg"
categories: [Git]
tags: [git, commit]
---

### 前言
Git天天用，但是commit的message确是乱七八糟，如何才能避免这种情况？

使用规范

社区有很多写法，但是Angular 规范，这是目前使用最广的写法，比较合理和系统化，并且有配套的工具

接下来就介绍Commitizen和cz-conventional-changelog

#### Commitizen
我们的目标是要通过工具生成和约束Commit Message，Commitizen可以帮我们完成。

我们需要借助commitizen/cz-cli提供的 git cz 命令替代我们的 git commit 命令, 帮助我们生成符合规范的 commit message.

#### cz-conventional-changelog
指定给commitizen的一个 Adapter（适配器） 

一个符合 Angular团队规范的 预先配置项

可以使 commitizen 按照我们指定的规范为我们生成 commit message.

### 安装使用
使用前先修改 ~/.gitconfig （如果文件不存在先创建），添加如下内容：

```javascript
[commit]
template = ~/.gitmessage
```

新建 ~/.gitmessage 内容如下：

```javascript
# head: <type>(<scope>): <subject>
# - type: feat, fix, docs, style, refactor, test, chore
# - scope: can be empty (eg. if the change is a global or difficult to assign to a single component)
# - subject: start with verb (such as 'change'), 50-character line
#
# body: 72-character wrapped. This should answer:
# * Why was this change necessary?
# * How does it address the problem?
# * Are there any side effects?
#
# footer: 
# - Include a link to the ticket, if any.
# - BREAKING CHANGE
#
```

#### 全局安装
使用 npm 安装

```javascript
npm install -g commitizen cz-conventional-changelog
```
使用 echo 设置 path，为 commitizen 指定 Adapter

```javascript
echo '{ "path": "cz-conventional-changelog" }' > ~/.czrc
```

运行 git cz

#### 项目级安装

使用 npm 安装

```javascript
npm install -d commitizen cz-conventional-changelog
```

package.json中添加配置:

```json
"script":{
  ...,
  "commit":"git-cz",
},
"config":{
  "commitizen":{
    "path":"node_modules/cz-conventional-changelog"
  }
}
```

运行 npm run commit

### 效果展示

![nestedscrollview]({{ site.url }}/assets/img/postpics/QQ20180314-232523.gif)


